# MinIO Helm Values — S3-compatible object storage for OpenCTI and TheHive
# Chart: minio/minio (https://charts.min.io/)
#
# Install:
#   helm repo add minio https://charts.min.io/
#   helm install minio minio/minio -n shared -f minio.yaml

# Single-node mode (standalone)
mode: standalone

# Auth — credentials pulled from K8s Secret (see k8s/shared/secrets.yaml)
existingSecret: soc-shared-secrets

# Resource limits — slim config
resources:
  requests:
    memory: "256Mi"
    cpu: "100m"
  limits:
    memory: "512Mi"
    cpu: "250m"

# Persistent storage — 40GB for artifacts and threat intel files
persistence:
  enabled: true
  size: "40Gi"
  storageClass: "local-path"

# Create default buckets on startup
buckets:
  - name: opencti-bucket
    policy: none
    purge: false
  - name: thehive-bucket
    policy: none
    purge: false
  - name: cortex-bucket
    policy: none
    purge: false

# Disable console (saves RAM, we manage via CLI or API)
console:
  enabled: false

# Health probes — MinIO health endpoints
livenessProbe:
  httpGet:
    path: /minio/health/live
    port: 9000
  initialDelaySeconds: 30
  periodSeconds: 30
  failureThreshold: 3
readinessProbe:
  httpGet:
    path: /minio/health/ready
    port: 9000
  initialDelaySeconds: 10
  periodSeconds: 15
  failureThreshold: 3

# Metrics — enable for Prometheus
metrics:
  serviceMonitor:
    enabled: true
